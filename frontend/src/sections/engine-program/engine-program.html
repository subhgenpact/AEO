<!-- Engine Program Overview Section Template -->
<div class="card chart-card mb-3" id="engine-program-overview">
  <div class="card-header d-flex justify-content-between align-items-center py-2">
    <div>
      <h6 class="mb-0">Engine Program Overview</h6>
      <small class="text-dark opacity-75">ESN Counts by Program and Year</small>
    </div>
    <div class="d-flex align-items-center gap-2">
      <button class="btn btn-sm btn-outline-secondary" id="engineProgramBackBtn" style="display:none;">Back</button>
      <div class="text-warning" style="color: #198754 !important;">
        <i class="fas fa-info-circle me-1"></i>Note: 2025 contains only Q4 data
      </div>
    </div>
  </div>

  <div class="card-body py-2">
    <div class="row g-2">
      <div class="col-12 d-flex">
        <div class="flex-fill me-2" style="width: 65%; display: flex; flex-direction: column;">
          <!-- Legend and Controls on top row -->
          <div class="d-flex gap-2 mb-2 justify-content-between align-items-center flex-wrap" style="flex-shrink: 0; z-index: 10; position: relative;">
            <!-- Legend will be injected here by JavaScript -->
            <div class="engine-program-legend" style="flex: 1; display: flex; flex-wrap: wrap; gap: 15px;"></div>
            
            <!-- View Toggle Buttons -->
            <div class="btn-group btn-group-sm" role="group" aria-label="View filter">
              <input type="radio" class="btn-check" name="engineProgramView" id="viewYear" value="year">
              <label class="btn btn-outline-primary" for="viewYear">Year </label>
              <input type="radio" class="btn-check" name="engineProgramView" id="viewQuarter" value="quarter" checked>
              <label class="btn btn-outline-primary" for="viewQuarter">Quarter </label>
              <input type="radio" class="btn-check" name="engineProgramView" id="viewMonth" value="month">
              <label class="btn btn-outline-primary" for="viewMonth">Month </label>
            </div>

            <!-- Zoom Controls -->
            <div class="btn-group btn-group-sm" role="group" aria-label="Zoom controls">
              <button class="btn btn-outline-secondary" id="zoomInEngineProgram" title="Zoom In">
                <i class="fas fa-search-plus"></i>
              </button>
              <button class="btn btn-outline-secondary" id="resetEngineProgramZoom" title="Reset Zoom">
                <i class="fas fa-search-minus"></i>
              </button>
            </div>
          </div>
          
          <!-- Chart -->
          <div class="chart-container" style="height: 150px; flex-shrink: 0; position: relative; z-index: 1;">
            <canvas id="engineProgramChart"></canvas>
          </div>
        </div>
        <div class="flex-fill" style="width: 35%;">
          <div class="card h-100">
            <div class="card-body p-1">
              <div class="table-responsive" style="max-height: 200px; overflow-y: auto;">
                <table class="table table-sm table-bordered mb-0" id="engineProgramSummaryTable">
                  <thead class="table-light">
                    <tr>
                      <th rowspan="2" class="text-center align-middle">Year</th>
                      <th colspan="3" class="text-center">Distinct ESN Count</th>
                      <th rowspan="2" class="text-center align-middle">Total</th>
                    </tr>
                    <tr>
                      <th class="text-center">LM2500</th>
                      <th class="text-center">LM6000</th>
                      <th class="text-center">LMS100</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Data will be populated by JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>